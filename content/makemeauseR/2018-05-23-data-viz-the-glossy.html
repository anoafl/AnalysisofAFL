---
title : "Data Viz The Glossy"
description : ""
author : "Robert Nguyen"
date : 2018-05-23
tags : ["fitzRoy", "graphics","R","open science", "statistics"]

---



<p>One of the fun things when doing graphs, is that moment when you identify something that sticks out. A great example of this is done by <span class="citation">[@ethan_meldrum]</span>(<a href="https://twitter.com/ethan_meldrum/status/991988146215632896" class="uri">https://twitter.com/ethan_meldrum/status/991988146215632896</a>)</p>
<div class="figure">
<img src="/img/DcQ-u9tVAAIuJ7z.PNG" alt="@ethan_meldrum" />
<p class="caption"><span class="citation">@ethan_meldrum</span></p>
</div>
<p>In it we can see how much Paul Seedsman 2018 has stood out so far. Lets give it the ggplot/fitzRoy treatment.</p>
<div id="step-one---get-the-data" class="section level1">
<h1>Step One - Get the Data</h1>
<pre class="r"><code>library(fitzRoy)
library(tidyverse)

df&lt;-fitzRoy::player_stats

df1&lt;-fitzRoy::get_footywire_stats(9514:9593)
df&lt;-df%&gt;%filter(Season != 2018)
df2&lt;-rbind(df, df1)

df2%&gt;%select(Season,TO, MG, Player) %&gt;%
  filter(Season==2018) %&gt;%
  group_by(Player)%&gt;%
  summarise(Turnovers=sum(TO), Meters_gained=sum(MG)) </code></pre>
</div>
<div id="step-2" class="section level1">
<h1>Step 2</h1>
<p>This is an assumption we are making here that we know the players we want to highlight. But lets say we do and the players are Rory Laird, Bryce Gibbs, Paul Seedsman and Tom Mitchell. We need to create a flag for them so we can subset them out for highlighting down the track.</p>
<p>We do this using the <code>mutate</code>.</p>
<p><code>mutate(flag = ifelse(Player %in% c(&quot;Rory Laird&quot;,&quot;Bryce Gibbs&quot;,Paul Seedsman&quot;,&quot;Tom Mitchell&quot;), T, F))</code></p>
<p>Lets break this down</p>
<ul>
<li>step a create a variable called flag <code>flag=</code></li>
<li>step b <code>ifelse(Player %in% c(&quot;P1&quot;, &quot;P2&quot;))</code> if Player is in this list (c(“P1”, P2))</li>
<li>step c , Give value T otherwise give value F <code>,T,F))</code></li>
</ul>
<pre class="r"><code>df2%&gt;%select(Season,TO, MG, Player) %&gt;%
  filter(Season==2018) %&gt;%
  group_by(Player)%&gt;%
  summarise(Turnovers=sum(TO), Meters_gained=sum(MG)) %&gt;%
  mutate(flag = ifelse(Player %in% c(&quot;Rory Laird&quot;,
                                               &quot;Bryce Gibbs&quot;,
                                               &quot;Paul Seedsman&quot;, 
                                               &quot;Tom Mitchell&quot;), T, F)) %&gt;% 
  ggplot(aes(x=Meters_gained, y=Turnovers)) + 
  geom_point(aes(colour=flag), show.legend = FALSE) +
  geom_smooth(method=&#39;lm&#39;,formula=y~x) +
  geom_text(aes(label=ifelse(Player %in% c (&quot;Rory Laird&quot;, 
                                            &quot;Bryce Gibbs&quot;,
                                            &quot;Paul Seedsman&quot;, 
                                            &quot;Tom Mitchell&quot;), 
                             Player, &quot;&quot;),vjust=-1))</code></pre>
</div>
<div id="step-3---give-it-the-ggplot-treatment" class="section level1">
<h1>Step 3 - Give it the ggplot treatment</h1>
<pre class="r"><code> ggplot(aes(x=Meters_gained, y=Turnovers)) + 
  geom_point(aes(colour=flag), show.legend = FALSE) +
  geom_smooth(method=&#39;lm&#39;,formula=y~x) +
  geom_text(aes(label=ifelse(Player %in% c (&quot;Rory Laird&quot;, 
                                            &quot;Bryce Gibbs&quot;,
                                            &quot;Paul Seedsman&quot;, 
                                            &quot;Tom Mitchell&quot;), 
                             Player, &quot;&quot;),vjust=-1))</code></pre>
<ul>
<li>1 <code>ggplot(aes(x=Meters_gained, y=Turnovers))</code> creates a blank canvas with our x variable being <code>Meters_gained</code> and y being <code>Turnovers</code></li>
<li>2 <code>geom_point(aes(colour=flag), show.legend=FALSE)</code> this creates our graph dots we are taking the xy from ggplot and using <code>aes(colour=flag)</code> to give our points different colours depending on the value of <code>flag</code></li>
<li>3 <code>geom_smooth(method=lm, formula=y~x)</code> this gives us our line of best fit (linear regression <code>method=lm</code>)</li>
<li>4 <code>geom_text</code> this gives us our labels, but we don’t want all the players so we subset the labels. We do this using another <code>ifelse</code></li>
<li>5 you can think of the ifelse as <em>if the Player is in this list , give them label of Player, otherwise blank “”</em></li>
</ul>
<p>** 5a</p>
</div>

---
title : "Make Your Own AFL Graph"
author : "Robert Nguyen"
date : 2018-05-04
tags : ["fitzRoy", "graphics","R","open science"]

---



<blockquote>
<p>“The greatest value of a picture is when it forces us to notice what we never expected to see.” - J. W. Tukey (1977)</p>
</blockquote>
<p>To learn a new skill I think there needs to be 2 main drivers</p>
<ul>
<li>An interest in a topic</li>
<li>easy to get to tangible wins to encourage deeper understanding</li>
</ul>
<p>Hopefully you have stumbled across this blog because you have an interest in footy and because you want to start analysing the game yourself. So lets gets started.</p>
<p>The graph you are going to be able to create by the end of this post, is a cummulative line chart showing how quickly a player racks up a certain stat. For an example of a final product you can have a loock at a <a href="https://twitter.com/anoafl/status/992235792121516032">graph</a> produced by Matt Cowgill.</p>
<p>To get started using R you can download R from <a href="https://www.r-project.org">here</a> and a nice Rstudio from <a href="https://www.rstudio.com/products/rstudio/download/">here</a>.</p>
<p>Once you have those both installed, lets get cracking.</p>
<pre class="r"><code>install.packages(&quot;tidyverse&quot;)
install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;jimmyday12/fitzRoy&quot;)
library(fitzRoy)
library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages ------------------------------------- tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 2.2.1     v purrr   0.2.4
## v tibble  1.4.2     v dplyr   0.7.4
## v tidyr   0.8.0     v stringr 1.3.0
## v readr   1.1.1     v forcats 0.3.0</code></pre>
<pre><code>## -- Conflicts ---------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>df&lt;-fitzRoy::afldata
df%&gt;%filter(Season&gt;1990)%&gt;%
  group_by(ID) %&gt;%
  mutate(games_played=row_number())%&gt;%
  mutate(cummulativefrees=cumsum(Frees.For))%&gt;%

ggplot(aes(x=games_played, y=cummulativefrees, group = ID)) + geom_line() +xlab(&quot;Games Played&quot;) +ylab(&quot;Cummulative Count of Free kicks received&quot;) </code></pre>
<p><img src="/fitzRoy/2018-05-04-make-your-own-afl-graphs_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Hopefully you are able to run the script above and get the same graph. If not #makemeauseR and tweet <a href="https://twitter.com/anoafl">at me</a> and I will lend a hand. Alternively there are great open slack groups like the <a href="https://medium.com/@kierisi/r4ds-the-next-iteration-d51e0a1b0b82">R4DS</a> where members are some of the most helpful going around!</p>
<p>So now you have hopefully the quick win out the way and you are now a bit more keen on diving in and seeing how this all works.</p>
<div id="step-one" class="section level1">
<h1>Step One</h1>
<p>Get the data – <a href="https://jimmyday12.github.io/fitzRoy/index.html">fitzRoy</a> hopefully makes this an easier job because the data is already stored in a <a href="https://www.jstatsoft.org/article/view/v059i10/v59i10.pdf">tidy format</a></p>
<p>But its not just enough to have data, after all whats the point? You want to do some analyse and visualise data because you have a question in mind, you are driven to look into something that you find interesting.</p>
<p>So with that in mind, lets see if there is a relationship between <code>Contested.Marks</code> and <code>Weight</code>.</p>
<pre class="r"><code># install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;jimmyday12/fitzRoy&quot;)
library(fitzRoy)
library(tidyverse)
df&lt;-fitzRoy::afldata</code></pre>
<p>Now that you have your dataframe <code>df</code> you can see that it collection of variables (columns) and observations of those variables (rows) <code>df</code> looking at some of these variables in <code>df</code></p>
<ul>
<li><code>Weight</code></li>
<li><code>Contested.Marks</code></li>
</ul>
</div>
<div id="step-two---create-your-plot" class="section level1">
<h1>Step Two - Create your plot</h1>
<pre class="r"><code>df%&gt;%
ggplot(aes(x=Weight, y=Contested.Marks, group = ID)) + geom_point() </code></pre>
<pre><code>## Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
<p><img src="/fitzRoy/2018-05-04-make-your-own-afl-graphs_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Let me explain some of the commands going on here.</p>
<p><code>df</code> is what we called our dataframe before, this is followed by the ‘pipe’ operator <code>%&gt;%</code>. In simple terms it takes the output of one <code>df</code> and inserts it into the <code>ggplot</code> In short this “chaining” allows you to pass a result onto the next function. For the above example we first create a dataframe called <code>df</code> (how creative) the next line we take this data and this dataframe <code>df</code> becomes the data we will base our plot off.</p>
<p><code>aes</code></p>
</div>

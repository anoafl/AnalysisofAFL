---
title: "Getting player information"
author: "Robert Nguyen"
date: 2018-11-24
tags : ["fitzRoy", "scraping","R","open science"]
---



<p>So its draft time in AFL at the moment and being a keen fan on all drafting I was a little disappointing with the coverage. Not because there were not people doing some interesting work. We had a great article on <a href="https://www.abc.net.au/news/2018-11-22/the-art-of-success-in-the-afl-draft/10517766">ABC</a> by the guys over at <a href="https://www.hpnfooty.com/">HPN</a> who were contributors to <a href="https://www.harpercollins.com.au/9780733338441/">footballistics</a> a great book for anyone who is interested in some numbers behind the game. But I just wished there were more!</p>
<p>Tony over at <a href="http://www.matterofstats.com/">Matterofstats</a> has been recently doing a great series of <a href="http://www.matterofstats.com/mafl-stats-journal/2018/11/21/classifying-recent-afl-players-by-position-part-2-whos-where">blog posts</a> trying to classify players into positions based on their data.</p>
<p>So it would seem as though people are interested in players draft positions, what club they play for and their playing positions.</p>
<p>But I guess another question could be, if these blog posts are so interesting and presumebly useful to AFL clubs and fans why is there not more content?</p>
<p>My guess is that its mainly because the data isn’t readily available.</p>
<p>So lets make this data available for all from <a href="https://www.footywire.com/">footywire</a> and if the demand is there (which I suspect it will be) expect some integration to <a href="https://jimmyday12.github.io/fitzRoy/index.html">fitzRoy</a></p>
<div id="step-one" class="section level1">
<h1>Step One</h1>
<p>First we have to find a page that contains the data we are after, for ease it would be best if all the information we wanted, say player name, club, height, weight, draft positon and playing position were available on the same page.</p>
<p>So lets go to footywire do some digging around and lets find a specific players page say <a href="https://www.footywire.com/afl/footy/pp-west-coast-eagles--dominic-sheed">Dominic Sheed</a>.</p>
<div class="figure">
<img src="/img/domsheed.JPG" alt="Grand Final Hero" />
<p class="caption">Grand Final Hero</p>
</div>
<p>So Looking at the page, we can see there is a fair bit of information we would like. We want his height, weight, position and his draft position. Hopefully by following this example if you wanted to you could also get his supercoach price, fantasy price and his contract status.</p>
</div>
<div id="step-2" class="section level1">
<h1>Step 2</h1>
<p>Install the R packages that we need.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## Warning: package &#39;tidyverse&#39; was built under R version 3.5.1</code></pre>
<pre><code>## -- Attaching packages ---------------------------------- tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 3.1.0     v purrr   0.2.5
## v tibble  1.4.2     v dplyr   0.7.7
## v tidyr   0.8.1     v stringr 1.3.1
## v readr   1.1.1     v forcats 0.3.0</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 3.5.1</code></pre>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 3.5.1</code></pre>
<pre><code>## Warning: package &#39;purrr&#39; was built under R version 3.5.1</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 3.5.1</code></pre>
<pre><code>## Warning: package &#39;stringr&#39; was built under R version 3.5.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(rvest)</code></pre>
<pre><code>## Loading required package: xml2</code></pre>
<pre><code>## 
## Attaching package: &#39;rvest&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     pluck</code></pre>
<pre><code>## The following object is masked from &#39;package:readr&#39;:
## 
##     guess_encoding</code></pre>
<pre class="r"><code>library(stringr)</code></pre>
</div>
<div id="step-3-a-single-example" class="section level1">
<h1>Step 3 A single example</h1>
<p>I find its best to just scrape a single page then we can figure out how to automate the scrape so we can get a list of players.</p>
<p>So just looking at Dominic Sheed lets go step by step and get some of his information.</p>
<div id="step-3a-read-in-the-html" class="section level2">
<h2>Step 3a Read in the html</h2>
<pre class="r"><code>page&lt;-read_html(x=&quot;https://www.footywire.com/afl/footy/pp-west-coast-eagles--dominic-sheed&quot;)
page</code></pre>
<pre><code>## {xml_document}
## &lt;html&gt;
## [1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset= ...
## [2] &lt;body onload=&quot;pushContent(&#39;Player Profile&#39;, &#39;Dominic Sheed&#39;);showMem ...</code></pre>
<p>So now we have the content of our page, we essentially have to filter out the information we don’t want and leave the information we do want in hopefully a nice table so we can analyse it.</p>
</div>
<div id="step-3b-get-the-player-name" class="section level2">
<h2>Step 3b Get the player name</h2>
<pre class="r"><code> player&lt;- page%&gt;%
          html_nodes(&quot;.ldrow .hltitle&quot;)%&gt;%
          html_text()
player</code></pre>
<pre><code>## [1] &quot;Dominic Sheed&quot;</code></pre>
</div>
</div>
